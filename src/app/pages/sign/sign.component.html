<section class="vh-auto gradient-custom">
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-12 col-md-8 col-lg-6 col-xl-5">
        <div
          class="card background-glass "
          style="border-radius: 1rem"
        >
          <div class="card-body p-5">
            <div class="mb-3 mt-1">
              <h2 class="fw-bold mb-4 text-uppercase text-center">Cadastro</h2>

              <form #formPerson="ngForm">
                <div
                  data-mdb-input-init
                  class="form-outline form-white mb-2 d-flex flex-column justify-content-start"
                >
                  <label class="form-label text-left" for="typeName"
                    >Nome</label
                  >
                  <input
                    type="text"
                    id="typeName"
                    name="name"
                    class="form-control form-control-lg"
                    [(ngModel)]="client.name"
                    #name="ngModel"
                    minlength="3"
                    required
                  />
                  <div
                    *ngIf="name.errors && (name.dirty || name.touched)"
                    class="mt-1"
                  >
                    <p
                      class="text-danger"
                      [hidden]="!name.errors['required']"
                    >
                      Digite seu nome.
                    </p>
                  </div>
                </div>

                <div
                  data-mdb-input-init
                  class="form-outline form-white mb-2 d-flex flex-column justify-content-start"
                >
                  <label class="form-label text-left" for="typeEmail"
                    >E-mail</label
                  >
                  <input
                    email
                    type="email"
                    id="typeEmail"
                    name="email"
                    class="form-control form-control-lg"
                    [(ngModel)]="client.email"
                    #email="ngModel"
                    required
                  />
                  <div
                    *ngIf="email.errors && (email.dirty || email.touched)"
                    class="mt-1"
                  >
                    <p
                      class="text-danger"
                      [hidden]="!email.errors['required']"
                    >
                      Digite seu email.
                    </p>
                    <p class="text-danger" [hidden]="!email.errors['email']">
                      E-mail inválido.
                    </p>
                  </div>
                </div>

                <div
                  data-mdb-input-init
                  class="form-outline form-white mb-2 d-flex flex-column justify-content-start"
                >
                  <label class="form-label text-left" for="typeCPF">CPF</label>
                  <input
                    mask="000.000.000-00"
                    type="text"
                    id="typeCPF"
                    name="cpf"
                    class="form-control form-control-lg"
                    [(ngModel)]="client.cpf"
                    #cpf="ngModel"
                    cpf
                    required
                  />
                  <div
                    *ngIf="cpf.errors && (cpf.dirty || cpf.touched)"
                    class="mt-1"
                  >
                    <p class="text-danger" [hidden]="!cpf.errors['required']">
                      Digite seu CPF.
                    </p>
                    <p class="text-danger" [hidden]="!cpf.errors['cpf']">
                      CPF inválido.
                    </p>
                  </div>
                </div>

                <div
                  data-mdb-input-init
                  class="form-outline form-white mb-2 d-flex flex-column justify-content-start"
                >
                  <label class="form-label text-left" for="typePhone"
                    >Telefone</label
                  >
                  <input phone
                    mask="(00) 0000-0000 || (00) 0 0000-0000"
                    type="text"
                    id="typePhone"
                    name="phone"
                    class="form-control form-control-lg"
                    [(ngModel)]="client.phone"
                    #phone="ngModel"
                    required
                  />
                  <div
                    *ngIf="phone.errors && (phone.dirty || phone.touched)"
                    class="mt-1"
                  >
                    <p class="text-danger" [hidden]="!phone.errors['required']">
                      Digite seu telefone.
                    </p>
                    <p class="text-danger" [hidden]="!phone.errors['phone']">
                      Telefone inválido.
                    </p>
                  </div>
                </div>

                <div
                  data-mdb-input-init
                  class="form-outline form-white mb-3 d-flex flex-column justify-content-start"
                >
                  <!-- CEP -->
                  <div data-mdb-input-init class="form-outline form-white mb-3 d-flex flex-column justify-content-start">
                    <label class="form-label" for="cep">CEP</label>
                    <input
                      type="text"
                      id="cep"
                      name="cep"
                      class="form-control form-control-lg"
                      maxlength="9"
                      [(ngModel)]="cep"
                      cep
                      (addressChange)="address = $event"
                      (neighborhoodChange)="neighborhood = $event"
                      (cityChange)="city = $event"
                      (stateChange)="state = $event"
                      (cepErrorChange)="cepError = $event"
                      #cepInput="ngModel"
                    />
                    <div *ngIf="cepInput.invalid && cepInput.touched" class="text-danger">
                      <p *ngIf="cepInput.errors?.['required']">CEP é obrigatório.</p>
                      <p *ngIf="cepInput.errors?.['cepInvalid']">CEP inválido.</p>
                      <p *ngIf="cepError">{{ cepError }}</p>
                    </div>
                  </div>

                  <div class="d-flex gap-1">
                    <!-- Endereço -->
                    <div data-mdb-input-init class="form-outline form-white mb-3 d-flex flex-column justify-content-start w-75">
                      <label class="form-label" for="address">Endereço</label>
                      <input
                        type="text"
                        id="address"
                        name="address"
                        class="form-control form-control-lg"
                        [(ngModel)]="address"
                        readonly
                      />
                    </div>

                    <!-- Número -->
                    <div data-mdb-input-init class="form-outline form-white mb-3 d-flex flex-column justify-content-start w-25">
                      <label class="form-label" for="number">Número</label>
                      <input
                        type="text"
                        id="number"
                        name="number"
                        class="form-control form-control-lg"
                        pattern="[0-9]+"
                        [(ngModel)]="number"
                        #numberInput="ngModel"
                      />
                      <div *ngIf="numberInput.invalid && numberInput.touched" class="text-danger">
                        <p *ngIf="numberInput.errors?.['required']">O número é obrigatório.</p>
                        <p *ngIf="numberInput.errors?.['pattern']">O número deve conter apenas dígitos.</p>
                      </div>
                    </div>
                  </div>

                  <!-- neighborhood -->
                  <div data-mdb-input-init class="form-outline form-white mb-3 d-flex flex-column justify-content-start">
                    <label class="form-label" for="neighborhood">Bairro</label>
                    <input
                      type="text"
                      id="neighborhood"
                      name="neighborhood"
                      class="form-control form-control-lg"
                      [(ngModel)]="neighborhood"
                      readonly
                    />
                  </div>

                  <div class="d-flex gap-1">
                    <!-- city -->
                    <div data-mdb-input-init class="form-outline form-white mb-3 d-flex flex-column justify-content-start w-75">
                      <label class="form-label" for="city">Cidade</label>
                      <input
                        type="text"
                        id="city"
                        name="city"
                        class="form-control form-control-lg"
                        [(ngModel)]="city"
                        readonly
                      />
                    </div>

                    <!-- state -->
                    <div data-mdb-input-init class="form-outline form-white mb-3 d-flex flex-column justify-content-start w-25">
                      <label class="form-label" for="state">Estado</label>
                      <input
                        type="text"
                        id="state"
                        name="state"
                        class="form-control form-control-lg"
                        [(ngModel)]="state"
                        readonly
                      />
                    </div>
                  </div>
                </div>

                <button
                  data-mdb-button-init
                  data-mdb-ripple-init
                  class="btn btn-outline btn-submit btn-lg px-5 w-100"
                  type="submit"
                  (click)="submit()"
                  [disabled]="!formPerson.form.valid"
                >
                  Cadastrar
                </button>

              </form>
            </div>

            <div class="d-flex justify-content-center mb-1">
              <p class="mb-0">
                Já possui uma conta?
                <a href="/login" class="-50 fw-bold">Login</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
